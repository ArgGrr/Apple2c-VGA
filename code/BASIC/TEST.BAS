10 POKE 49246,0: REM DOUBLE HI-RES ON
20 POKE 49239,0: REM HI-RES ON
30 POKE 49232,0: REM GRAPHICS
40 POKE 49234,0: REM FULL GRAPHICS
50 D$ =  CHR$ (4)
60 PRINT D$;"PR#3"

65 REM CLEAR DHGR SCREEN
70 GOSUB 2000
80 GOSUB 4000

100 FOR A=0 TO 15
130 FOR B=0 TO 7
140 BA=B+8
150 DA=BA: DB = 1: GOSUB 4040: BB= DC
170 FOR C=0 TO 15
180 V = C + B * 16

200 M0 = 16 + 32 + 64             REM: 0000111
201 M1 = 1 + 32 + 64              REM: 1000011
202 M2 = 1 + 2 + 64               REM: 1100001
203 M3 = 1 + 2 + 4                REM: 1110000
204 M4 = 1 + 2 + 4 + 8            REM: 1111000
205 M5 = 1 + 2 + 4 + 8 + 16       REM: 1111100
206 M6 = 1 + 2 + 4 + 8 + 16 + 32  REM: 1111110

207 M7 = 2 + 4 + 8 + 16 + 32 + 64 REM: 0111111
208 M8 = 4 + 8 + 16 + 32 + 64     REM: 0011111
209 M9 = 8 + 16 + 32 + 64         REM: 0001111



250 H=66
300 SP = H * 4
310 SY = INT(SP / 7)
320 SB = SP - (SY * 7)
330 BANK=0
340 IF H/2 - INT(H/2) = 0 THEN BANK=1
350 ? "140 PIXEL: "; H
360 ? "STARTPIXEL: ";SP
370 ? "SBYTE: ";SY
380 ? "STARTBIT: ";SB
390 ? "BANK: "; BANK

400 IF H/2-INT(H/2)=0 THEN POKE 49237,0: GOTO 420
410 POKE 49236,0
420 HZ = INT(H/2)
430 Z=INT(V/64)
440 Y=INT((V-Z*64)/8)
450 X = V - Y*8 - Z*64
460 ME = 8192+X*1024+Y*128+Z*40+HZ

VA = PEEK(ME)




700 NEXT
710 NEXT
720 NEXT
 
890 REM PRESS KEY TO EXIT TO TEXT
900 GET S$
905 POKE 49237,0: REM NORMAL MEM BANK
910 POKE 49247,0: REM DOUBLE HI-RES OFF
920 POKE 49233,0: REM TEXT MODE
930 POKE 49236,0: REM PAGE ONE 
940 TEXT 
950 END

1000 IF H/2-INT(H/2)=0 THEN POKE 49237,0: GOTO 1002
1001 POKE 49236,0
1002 HZ = INT(H/2)
1010 Z=INT(V/64)
1020 Y=INT((V-Z*64)/8)
1030 X = V - Y*8 - Z*64
1060 POKE 8192+X*1024+Y*128+Z*40+HZ, COL
1070 RETURN

2000 REM CLEAR DHGR SCREEN
2010 POKE 49237,0: REM PAGE TWO
2020 FOR A=8192 TO 16384
2030 POKE A,0
2040 NEXT
2050 POKE 49236,0: REM PAGE ONE 
2060 FOR A=8192 TO 16384
2070 POKE A,0
2080 NEXT
2090 RETURN

4000 DATA 173,48,3,45,49,3,141,48,3,96,46,48,3,96,110,48,3,96,173,48,3,13,49,3,141,48,3,96
4010 FOR DI=0 TO 27: READ DA: POKE 768+DI,DA: NEXT
4020 RETURN
4030 REM AND
4040 IF DA > 511 THEN DA = DA - 511
4041 IF DA > 255 THEN DA = DA - 255
4049 POKE 816,DA: POKE 817,DB: CALL 768: DC=PEEK(816): RETURN
4050 REM ROL
4060 POKE 816,DA: CALL 778: DC=PEEK(816): RETURN
4070 REM ROR
4080 POKE 816,DA: CALL 782: DC=PEEK(816): RETURN
4090 REM OR
4100 POKE 816,DA: POKE 817,DB: CALL 786: DC=PEEK(816): RETURN
